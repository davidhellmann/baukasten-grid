// Get Breakpoints from Map
@import '../../../../node_modules/include-media/dist/include-media';
@import '../functions/_map-deep-get';
@import '../mixins/_grid';
@import '../mixins/_center';
@import '../settings/_grid';

[class*='#{$bk-prefix}-section'] {
  @if $bk-legacy == true {
    display: flex;
  }

  @if $bk-cssgrid == true {
    display: grid;
  }

  @include make-section();
  @include make-section-padding();
  @include center();

  @if $bk-testing == true {
    @extend %styling;
  }
}

[class*='#{$bk-prefix}-row'] {
  @if $bk-legacy == true {
    @include make-row();
    display: flex;
    flex-flow: row wrap;
    flex: 1 1 0;
  }

  @if $bk-cssgrid == true {
    display: grid;

    @supports (display: grid) {
      margin-left: 0;
      margin-right: 0;
    }
  }

  @if $bk-testing == true {
    @extend %styling;
  }
}

[class*='#{$bk-prefix}-row']:not(.no-padding) {
  > [class*='#{$bk-prefix}-col'] {
    @if $bk-legacy == true {
      @include make-col-padding();
    }

    @if $bk-cssgrid == true {
      @include make-col-padding(0);
    }
  }

  @if $bk-cssgrid == true {
    @include make-col-gap();
  }
}

[class*='#{$bk-prefix}-col'] {
  @if $bk-legacy == true {
    flex: 1 1 0;
    width: auto;
    position: relative;
    min-height: 1px;
  }

  @if $bk-cssgrid == true {
  grid-column-start: auto;
    @include make-col-padding(0);
  }

  @if $bk-testing == true {
    @extend %styling;
    @include f(16px, 32px, padding-top padding-bottom);
  }
}


// Creating Classes
@each $key, $value in $bk-breakpoints {
  $from: map-get($value, from);
  $cols: map-get($value, cols);
  $prefix: $bk-prefix;

  @if $key == 'min' {
    @include media('>=#{$from}') {
      // Row Classes
      @for $i from 1 through $cols {
        .#{$prefix}-row-#{$i} {
          @if $bk-cssgrid == true {
            grid-template-columns: repeat(#{$i}, 1fr);
          }
        }
      }

      // Col Classes
      @for $i from 1 through $cols {
        .#{$prefix}-col-#{$i} {
          @if $bk-legacy == true {
            @include make-col($i, $cols);
          }

          @if $bk-cssgrid == true {
            @include make-col($i);
          }
        }
      }
    }

  } @else if $key != 'min' {
    @include media('>=#{$from}') {
      // Row Classes
      @for $i from 1 through $cols {
        .#{$prefix}-row-#{$key}-#{$i} {
          @include make-row($i);
        }
      }

      // Col Classes
      @for $i from 1 through $cols {
        .#{$prefix}-col-#{$key}-#{$i} {
          @include make-col($i);
        }
      }
    }
  }
}
